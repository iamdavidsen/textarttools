{% extends "_base.html" %}

{% load static %}

{% block title %}
    Ascii Text Art Banner Generator
{% endblock %}

{% block content %}
    {% include "_header.html" %}
    <section>
        <div class="container px-4 mx-auto mb-6 mt-16">
            <h1 class="text-4xl">Ascii Text Art Banner Generator Result</h1>
        </div>
        <div class="container px-4 mx-auto">
            <div class="mb-4 flex space-x-4 justify-end">
                <button class="block py-4 px-8 text-sm text-white font-semibold leading-none bg-blue-600 hover:bg-blue-700 rounded"
                        type="submit">Save as PNG
                </button>
                <button class="block py-4 px-8 text-sm text-white font-semibold leading-none bg-blue-600 hover:bg-blue-700 rounded"
                        type="submit">Copy To Clipboard
                </button>
            </div>
            {% for banner in result %}
                <div class="mb-4 p-4 bg-blueGray-100 rounded" x-data="responsiveText()" x-init="onLoad()">
                    <p class="text-xs">{{ banner.font }}</p>
                    <div class="svg" style="resize: horizontal;overflow: hidden;width: 100%;height: auto;">
                        <svg x-ref="svg" width="100%" viewBox="0 0 1000 1000">
                            <foreignObject height="100%" width="100%">
                                <pre x-ref="text" class="result-text text-xl font-mono font-bold mx-auto leading-none">{{ banner.text }}</pre>
                            </foreignObject>
                        </svg>
                    </div>
                </div>
            {% endfor %}
            <div class="mb-4">
                <div class="w-full">
                    <button onclick="window.history.back();"
                            class="block w-full py-4 px-8 text-sm text-center text-white font-semibold leading-none bg-orange-600 hover:bg-blue-700 rounded">
                        Generate another one?
                    </button>
                </div>
            </div>
        </div>
        <div class="hidden">
            {{ form }}
        </div>
    </section>
    {% include "_footer.html" %}
{% endblock %}
{% block scripts %}
    <script>
        function responsiveText() {
            return {
                onLoad: function () {
                    var element = this.$refs.text
                    var w = element.scrollWidth;
                    var h = element.scrollHeight;
                    this.$refs.svg.setAttribute("viewBox", "0 0 " + w + " " + h);
                }
            }
        }
    </script>
{% endblock %}
