{% extends "_base.html" %}

{% load static %}

{% block title %}
    image to ascii art
{% endblock %}

{% block content %}
    {% include "_header.html" %}
    <section class="content">
        <h1 class="text-center title">Image to Ascii Art Generator Result<br></h1>

        <div class=" mb-3 d-flex justify-content-end">
            <button class="btn btn-primary"
                    id="copy" onclick="copyText()">Copy To Clipboard
            </button>
        </div>
        <div class="mb-3">
            <div class="ascii-image-container">
                <svg
                        onload="loadSvg()"
                        id="svg"
                        width="100%"
                        viewBox="0 0 100 100"
                >
                    <foreignObject height="100%" width="100%">
                        <pre class="ascii-image" id="text">{{ result }}</pre>
                    </foreignObject>
                </svg>
            </div>
        </div>
        <div class="mb-3">
            <button onclick="window.history.back();" class="btn btn-primary">Generate another one?</button>
        </div>
    </section>
    {% include "_footer.html" %}
{% endblock %}
{% block scripts %}
    <script>
        function loadSvg() {
            var element = document.getElementById("text")
            var w = element.scrollWidth;
            var h = element.scrollHeight;
            document.getElementById("svg").setAttribute("viewBox", "0 0 " + w + " " + h);
        }

        function copyText() {
            var copyText = document.getElementById("text").textContent;
            var fullLink = document.createElement('textarea');

            document.body.appendChild(fullLink);

            fullLink.value = copyText;
            fullLink.select();

            document.execCommand("copy", false);

            fullLink.remove();

            document.getElementById('copy').textContent = "Copied to Clipboard!"
        }
    </script>
{% endblock scripts %}

